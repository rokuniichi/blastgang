window.__require=function e(t,o,n){function r(c,s){if(!o[c]){if(!t[c]){var a=c.split("/");if(a=a[a.length-1],!t[a]){var u="function"==typeof __require&&__require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);throw new Error("Cannot find module '"+c+"'")}c=a}var p=o[c]={exports:{}};t[c][0].call(p.exports,function(e){return r(t[c][1][e]||e)},p,p.exports,e,t,o,n)}return o[c].exports}for(var i="function"==typeof __require&&__require,c=0;c<n.length;c++)r(n[c]);return r}({AnimationSystem:[function(e,t,o){"use strict";cc._RF.push(t,"bf5e3gysNtMo6IwY0sL61qx","AnimationSystem");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.AnimationSystem=void 0;var i=e("../../../core/utils/assert"),c=cc._decorator,s=c.ccclass,a=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.animationComponents=[],t.animations=new Map,t}return n(t,e),t.prototype.onLoad=function(){this.register()},t.prototype.register=function(){for(var e=0,t=this.animationComponents;e<t.length;e++){var o=t[e];this.animations.set(o.type,o)}},t.prototype.play=function(e,t){var o=this.animations.get(e);return i.assertNotNull(o,this,'Animation "'+e+'" not registered'),o.play(t)},t.prototype.has=function(e){return this.animations.has(e)},r([a([cc.Component])],t.prototype,"animationComponents",void 0),t=r([s],t)}(cc.Component);o.AnimationSystem=u,cc._RF.pop()},{"../../../core/utils/assert":"assert"}],AnimationType:[function(e,t,o){"use strict";cc._RF.push(t,"979d9lb321ALprJzeO9CLWi","AnimationType"),Object.defineProperty(o,"__esModule",{value:!0}),o.AnimationType=void 0,function(e){e[e.DESTRUCTION=0]="DESTRUCTION"}(o.AnimationType||(o.AnimationType={})),cc._RF.pop()},{}],BaseAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"53cc3GT4qtCr6WewCT4WGse","BaseAnimation"),Object.defineProperty(o,"__esModule",{value:!0}),o.BaseAnimation=void 0;var n=function(){function e(){}return e.prototype.ensureTarget=function(e){if(!e||!cc.isValid(e))throw new Error("["+this.constructor.name+"] target is invalid");return e},e}();o.BaseAnimation=n,cc._RF.pop()},{}],BaseController:[function(e,t,o){"use strict";cc._RF.push(t,"badd4D/MYpB0pfYbiXf2xQf","BaseController"),Object.defineProperty(o,"__esModule",{value:!0}),o.BaseController=void 0;var n=function(){function e(){this._initialized=!1}return e.prototype.init=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._initialized||(this._initialized=!0,this.onInit.apply(this,e))},e.prototype.dispose=function(){this._initialized&&this.onDispose()},e.prototype.onDispose=function(){},e}();o.BaseController=n,cc._RF.pop()},{}],BaseGameConfigProvider:[function(e,t,o){"use strict";cc._RF.push(t,"062f5ambD5N9JvTzMqt3cqH","BaseGameConfigProvider"),Object.defineProperty(o,"__esModule",{value:!0}),o.BaseGameConfigProvider=void 0;var n=e("../../../core/utils/assert"),r=function(){function e(){this.config=null}return e.prototype.getConfig=function(){return n.assertNotNull(this.config,this,"config"),this.config},e}();o.BaseGameConfigProvider=r,cc._RF.pop()},{"../../../core/utils/assert":"assert"}],BoardController:[function(e,t,o){"use strict";cc._RF.push(t,"822885m60hJ9aKNQsvvr2h0","BoardController");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0}),o.BoardController=void 0;var r=e("../../../../core/events/SubscriptionGroup"),i=e("../../../domain/board/events/BoardProcessedEvent"),c=e("../../../domain/board/events/BoardProcessingEvent"),s=e("../../../presentation/events/TileClickedEvent"),a=function(e){function t(t){var o=e.call(this)||this;return o._subscriptions=new r.SubscriptionGroup,o.onTileClicked=function(e){if("IDLE"===o.gameStateModel.state){var t=o.searchService.findCluster(o.boardModel,e.position);if(!(t.length<o.config.clusterSize)){o.eventBus.emit(new c.BoardProcessingEvent);var n=o.destructionService.destroy(o.boardModel,t),r=o.searchService.findDrops(o.boardModel);o.gravityService.apply(o.boardModel,r);var s=o.fillService.spawn(o.boardModel);o.eventBus.emit(new i.BoardProcessedEvent(n,r,s))}}},o.config=t.gameConfig,o.eventBus=t.eventBus,o.gameStateModel=t.gameStateModel,o.boardModel=t.boardModel,o.fillService=t.fillService,o.searchService=t.searchService,o.destructionService=t.destructionService,o.gravityService=t.gravityService,o}return n(t,e),t.prototype.onInit=function(){this.fillService.spawn(this.boardModel),this._subscriptions.add(this.eventBus.on(s.TileClickedEvent,this.onTileClicked))},t.prototype.dispose=function(){this._subscriptions.clear()},t}(e("../BaseController").BaseController);o.BoardController=a,cc._RF.pop()},{"../../../../core/events/SubscriptionGroup":"SubscriptionGroup","../../../domain/board/events/BoardProcessedEvent":"BoardProcessedEvent","../../../domain/board/events/BoardProcessingEvent":"BoardProcessingEvent","../../../presentation/events/TileClickedEvent":"TileClickedEvent","../BaseController":"BaseController"}],BoardModel:[function(e,t,o){"use strict";cc._RF.push(t,"c0cfdX5W71DYbOfvKjFE2e8","BoardModel"),Object.defineProperty(o,"__esModule",{value:!0}),o.BoardModel=void 0;var n=e("../../../../core/collections/Matrix"),r=e("./TileType"),i=function(){function e(e,t){this._matrix=new n.Matrix(e,t,function(){return r.TileType.NONE})}return Object.defineProperty(e.prototype,"width",{get:function(){return this._matrix.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._matrix.height},enumerable:!1,configurable:!0}),e.prototype.get=function(e){return this._matrix.get(e.x,e.y)},e.prototype.set=function(e,t){this._matrix.set(e.x,e.y,t)},e.prototype.swap=function(e,t){this._matrix.swap(e.x,e.y,t.x,t.y)},e.prototype.isEmpty=function(e){return this.get(e)===r.TileType.NONE},e.prototype.forEach=function(e){this._matrix.forEach(function(t,o,n){e(t,{x:o,y:n})})},e.prototype.clear=function(e){this.set(e,r.TileType.NONE)},e}();o.BoardModel=i,cc._RF.pop()},{"../../../../core/collections/Matrix":"Matrix","./TileType":"TileType"}],BoardProcessedEvent:[function(e,t,o){"use strict";cc._RF.push(t,"be7a8ThjkJAZZsa9GwbrkxW","BoardProcessedEvent"),Object.defineProperty(o,"__esModule",{value:!0}),o.BoardProcessedEvent=void 0;var n=function(){return function(e,t,o){this.destroyed=e,this.dropped=t,this.spawned=o}}();o.BoardProcessedEvent=n,cc._RF.pop()},{}],BoardProcessingEvent:[function(e,t,o){"use strict";cc._RF.push(t,"7301avaHaVDVqt3Td2USTNf","BoardProcessingEvent"),Object.defineProperty(o,"__esModule",{value:!0}),o.BoardProcessingEvent=void 0;var n=function(){return function(){}}();o.BoardProcessingEvent=n,cc._RF.pop()},{}],BoardSyncedEvent:[function(e,t,o){"use strict";cc._RF.push(t,"41b9argyZFG0aJxv/Hrpryd","BoardSyncedEvent"),Object.defineProperty(o,"__esModule",{value:!0}),o.BoardSyncedEvent=void 0;var n=function(){return function(){}}();o.BoardSyncedEvent=n,cc._RF.pop()},{}],BoardViewContext:[function(e,t,o){"use strict";cc._RF.push(t,"493d5P3Og5P2pe7KPcaugF9","BoardViewContext"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],BoardView:[function(e,t,o){"use strict";cc._RF.push(t,"bb883j+cbZB3Jz/i+gZlUKc","BoardView");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c},i=this&&this.__awaiter||function(e,t,o,n){function r(e){return e instanceof o?e:new o(function(t){t(e)})}return new(o||(o=Promise))(function(o,i){function c(e){try{a(n.next(e))}catch(e){i(e)}}function s(e){try{a(n.throw(e))}catch(e){i(e)}}function a(e){e.done?o(e.value):r(e.value).then(c,s)}a((n=n.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return a([e,t])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(e){i=[6,e],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.BoardView=void 0;var s=e("../../../../core/collections/Matrix"),a=e("../../../../core/utils/assert"),u=e("../../../domain/board/events/BoardProcessedEvent"),p=e("../../../domain/board/models/TileType"),l=e("../../animations/AnimationType"),f=e("../../assets/TileAssets"),d=e("../../events/BoardSyncedEvent"),v=e("../../core/view/EventView"),h=e("./TileView"),y=cc._decorator,_=y.ccclass,m=y.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tilePrefab=null,t.tileLayer=null,t.fxLayer=null,t.tileAssets=null,t.onBoardProcessed=function(e){return i(t,void 0,Promise,function(){return c(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.animateDestruction(e.destroyed),this.animateGravity(e.dropped),this.animateSpawn(e.spawned)])];case 1:return t.sent(),this.render(),[2]}})})},t}return n(t,e),t.prototype.validate=function(){a.assertNotNull(this.tilePrefab,this,"tilePrefab"),a.assertNotNull(this.tileLayer,this,"tileLayer"),a.assertNotNull(this.fxLayer,this,"fxLayer"),a.assertNotNull(this.tileAssets,this,"tileAssets")},t.prototype.onInit=function(){var e=this;this.boardModel=this.context.boardModel,this.animationSystem=this.context.animationSystem,this.views=new s.Matrix(this.boardModel.width,this.boardModel.height,function(t,o){return e.createTile({x:t,y:o})}),this.render()},t.prototype.subscribe=function(){this.on(u.BoardProcessedEvent,this.onBoardProcessed)},t.prototype.createTile=function(e){var t=cc.instantiate(this.tilePrefab);t.setParent(this.tileLayer),t.setPosition(e.x*t.width,-e.y*t.height);var o=t.getComponent(h.TileView);return a.assertNotNull(o,this,"TileView"),o.init({eventBus:this.eventBus,position:e}),o},t.prototype.render=function(){var e=this;this.boardModel.forEach(function(t,o){e.updateTile(o)}),this.emit(new d.BoardSyncedEvent)},t.prototype.animateDestruction=function(e){return i(this,void 0,Promise,function(){var t,o,n,r,i,s,a=this;return c(this,function(c){switch(c.label){case 0:for(t=[],o=function(e){var o=n.views.get(e.x,e.y);o.node.setParent(n.fxLayer);var r=n.animationSystem.play(l.AnimationType.DESTRUCTION,o.getTarget()).then(function(){return o.node.setParent(a.tileLayer)});t.push(r)},n=this,r=0,i=e;r<i.length;r++)s=i[r],o(s);return[4,Promise.all(t)];case 1:return c.sent(),[2]}})})},t.prototype.animateGravity=function(e){return i(this,void 0,Promise,function(){return c(this,function(e){return[2]})})},t.prototype.animateSpawn=function(e){return i(this,void 0,Promise,function(){return c(this,function(e){return[2]})})},t.prototype.updateTile=function(e){var t=this.boardModel.get(e),o=this.views.get(e.x,e.y);t===p.TileType.NONE?o.hide():(o.show(),o.set(this.tileAssets.get(t)))},r([m(cc.Prefab)],t.prototype,"tilePrefab",void 0),r([m(cc.Node)],t.prototype,"tileLayer",void 0),r([m(cc.Node)],t.prototype,"fxLayer",void 0),r([m(f.TileAssets)],t.prototype,"tileAssets",void 0),t=r([_],t)}(v.EventView);o.BoardView=b,cc._RF.pop()},{"../../../../core/collections/Matrix":"Matrix","../../../../core/utils/assert":"assert","../../../domain/board/events/BoardProcessedEvent":"BoardProcessedEvent","../../../domain/board/models/TileType":"TileType","../../animations/AnimationType":"AnimationType","../../assets/TileAssets":"TileAssets","../../core/view/EventView":"EventView","../../events/BoardSyncedEvent":"BoardSyncedEvent","./TileView":"TileView"}],ContextView:[function(e,t,o){"use strict";cc._RF.push(t,"9c93bf+0u9PVaZ2BjXiiCzz","ContextView");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0}),o.ContextView=void 0;var r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._initialized=!1,t}return n(t,e),t.prototype.onLoad=function(){this.validate()},t.prototype.onDestroy=function(){this.dispose()},t.prototype.validate=function(){},t.prototype.init=function(e){this._initialized||(this.context=e,this.preInit(),this.onInit(),this.postInit(),this._initialized=!0)},t.prototype.preInit=function(){},t.prototype.onInit=function(){},t.prototype.postInit=function(){},t.prototype.dispose=function(){this._initialized&&(this.onDispose(),this._initialized=!1)},t.prototype.onDispose=function(){},t}(cc.Component);o.ContextView=r,cc._RF.pop()},{}],DefaultGameConfigProvider:[function(e,t,o){"use strict";cc._RF.push(t,"6d7bf+9Gc9BaI6X/UYq/U6Y","DefaultGameConfigProvider");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__awaiter||function(e,t,o,n){function r(e){return e instanceof o?e:new o(function(t){t(e)})}return new(o||(o=Promise))(function(o,i){function c(e){try{a(n.next(e))}catch(e){i(e)}}function s(e){try{a(n.throw(e))}catch(e){i(e)}}function a(e){e.done?o(e.value):r(e.value).then(c,s)}a((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return a([e,t])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(e){i=[6,e],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.DefaultGameConfigProvider=void 0;var c=e("../../domain/board/models/TileType"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.load=function(){return r(this,void 0,Promise,function(){return i(this,function(e){return this.config={boardWidth:9,boardHeight:9,allowedTypes:[c.TileType.RED,c.TileType.GREEN,c.TileType.BLUE,c.TileType.PURPLE,c.TileType.YELLOW],clusterSize:3,targetScore:500,maxMoves:20,scoreMultiplier:5},[2]})})},t}(e("./BaseGameConfigProvider").BaseGameConfigProvider);o.DefaultGameConfigProvider=s,cc._RF.pop()},{"../../domain/board/models/TileType":"TileType","./BaseGameConfigProvider":"BaseGameConfigProvider"}],DestructionAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"c42c5EMSsBEI4xJG/Pnf3N4","DestructionAnimation");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.DestructionAnimation=void 0;var i=e("./AnimationType"),c=cc._decorator,s=c.ccclass,a=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.squashDuration=.12,t.popDuration=.18,t.fadeDuration=.2,t.squashX=.92,t.squashY=1.05,t.popScale=1.15,t.finalScale=.6,t.finalOpacity=80,t.type=i.AnimationType.DESTRUCTION,t}return n(t,e),t.prototype.play=function(e){var t=this;return new Promise(function(o){if(cc.isValid(e)){var n=e.scale,r=e.opacity;cc.tween(e).to(t.squashDuration,{scaleX:n*t.squashX,scaleY:n*t.squashY},{easing:"sineOut"}).to(t.popDuration,{scale:n*t.popScale},{easing:"quadOut"}).parallel(cc.tween().to(t.fadeDuration,{opacity:t.finalOpacity},{easing:"sineIn"}),cc.tween().to(t.fadeDuration,{scale:n*t.finalScale},{easing:"quadIn"})).call(function(){e.scale=n,e.opacity=r,o()}).start()}else o()})},r([a],t.prototype,"squashDuration",void 0),r([a],t.prototype,"popDuration",void 0),r([a],t.prototype,"fadeDuration",void 0),r([a],t.prototype,"squashX",void 0),r([a],t.prototype,"squashY",void 0),r([a],t.prototype,"popScale",void 0),r([a],t.prototype,"finalScale",void 0),r([a],t.prototype,"finalOpacity",void 0),t=r([s],t)}(cc.Component);o.DestructionAnimation=u,cc._RF.pop()},{"./AnimationType":"AnimationType"}],DestructionService:[function(e,t,o){"use strict";cc._RF.push(t,"93326MkR7VAI4nwrWLlaiXB","DestructionService"),Object.defineProperty(o,"__esModule",{value:!0}),o.DestructionService=void 0;var n=function(){function e(){}return e.prototype.destroy=function(e,t){for(var o=[],n=0,r=t;n<r.length;n++){var i=r[n];e.clear(i),o.push(i)}return o},e}();o.DestructionService=n,cc._RF.pop()},{}],DynamicTextViewContext:[function(e,t,o){"use strict";cc._RF.push(t,"243ecVuTBJBlo2DFPE2Htsc","DynamicTextViewContext"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],DynamicTextView:[function(e,t,o){"use strict";cc._RF.push(t,"0f168cD/SdDKqVh9wvhZVsP","DynamicTextView");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.DynamicTextView=void 0;var i=e("../../../../core/utils/assert"),c=e("./EventView"),s=cc._decorator,a=s.ccclass,u=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.targetLabel=null,t.onValueChanged=function(e){t.render(e.value)},t}return n(t,e),t.prototype.validate=function(){i.assertNotNull(this.targetLabel,this,"targetLabel")},t.prototype.onInit=function(){this.render(this.context.initialValue)},t.prototype.subscribe=function(){this.on(this.eventType(),this.onValueChanged)},t.prototype.render=function(e){this.targetLabel.string=this.format(e)},r([u(cc.Label)],t.prototype,"targetLabel",void 0),t=r([a],t)}(c.EventView);o.DynamicTextView=p,cc._RF.pop()},{"../../../../core/utils/assert":"assert","./EventView":"EventView"}],EventBus:[function(e,t,o){"use strict";cc._RF.push(t,"4dd3bCOr0RC6b0g0I2ZgBu1","EventBus"),Object.defineProperty(o,"__esModule",{value:!0}),o.EventBus=void 0;var n=function(){function e(){this.listeners=new Map}return e.prototype.on=function(e,t){var o,n=this,r=null!==(o=this.listeners.get(e))&&void 0!==o?o:[];return r.push(t),this.listeners.set(e,r),{unsubscribe:function(){return n.off(e,t)}}},e.prototype.off=function(e,t){var o=this.listeners.get(e);if(o){var n=o.indexOf(t);-1!==n&&o.splice(n,1)}},e.prototype.emit=function(e){var t=this.listeners.get(e.constructor);if(t)for(var o=0,n=t;o<n.length;o++){(0,n[o])(e)}},e.prototype.clear=function(){this.listeners.clear()},e}();o.EventBus=n,cc._RF.pop()},{}],EventViewContext:[function(e,t,o){"use strict";cc._RF.push(t,"c34d1GkKTNIir2ulEw3eXmO","EventViewContext"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],EventView:[function(e,t,o){"use strict";cc._RF.push(t,"9dc55NMdhVDNaqP2Y3DA+nU","EventView");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0}),o.EventView=void 0;var r=e("../../../../core/events/SubscriptionGroup"),i=e("../../../../core/utils/assert"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.subscriptions=new r.SubscriptionGroup,t}return n(t,e),t.prototype.preInit=function(){this.eventBus=this.context.eventBus,i.assertNotNull(this.eventBus,this,"eventBus")},t.prototype.postInit=function(){this.subscribe()},t.prototype.subscribe=function(){},t.prototype.onDispose=function(){this.unsubscribe(),this.subscriptions.clear()},t.prototype.unsubscribe=function(){},t.prototype.on=function(e,t){var o=this.eventBus.on(e,t);this.subscriptions.add(o)},t.prototype.emit=function(e){this.eventBus.emit(e)},t}(e("./ContextView").ContextView);o.EventView=c,cc._RF.pop()},{"../../../../core/events/SubscriptionGroup":"SubscriptionGroup","../../../../core/utils/assert":"assert","./ContextView":"ContextView"}],FillService:[function(e,t,o){"use strict";cc._RF.push(t,"d97bd7HnMZA2bBnx3ucdYWP","FillService"),Object.defineProperty(o,"__esModule",{value:!0}),o.FillService=void 0;var n=function(){function e(e){this._allowedTypes=e}return e.prototype.spawn=function(e){for(var t=[],o=0;o<e.width;o++)for(var n=0;n<e.height;n++){var r={x:o,y:n};if(e.isEmpty(r)){var i=this.randomTile();e.set(r,i),t.push(r)}}return t},e.prototype.randomTile=function(){var e=this._allowedTypes;return e[Math.floor(Math.random()*e.length)]},e}();o.FillService=n,cc._RF.pop()},{}],GameConfigLoader:[function(e,t,o){"use strict";cc._RF.push(t,"2ed19M0P9lLlIQPuWAJuIRx","GameConfigLoader");var n=this&&this.__awaiter||function(e,t,o,n){function r(e){return e instanceof o?e:new o(function(t){t(e)})}return new(o||(o=Promise))(function(o,i){function c(e){try{a(n.next(e))}catch(e){i(e)}}function s(e){try{a(n.throw(e))}catch(e){i(e)}}function a(e){e.done?o(e.value):r(e.value).then(c,s)}a((n=n.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return a([e,t])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(e){i=[6,e],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.GameConfigLoader=void 0;var i=e("./GameConfigSource"),c=e("./providers/DefaultGameConfigProvider"),s=e("./providers/JsonGameConfigProvider"),a=function(){function e(){}return e.prototype.load=function(e){return n(this,void 0,Promise,function(){var t;return r(this,function(o){switch(o.label){case 0:return[4,(t=this.createProvider(e)).load()];case 1:return o.sent(),[2,t.getConfig()]}})})},e.prototype.createProvider=function(e){switch(e){case i.GameConfigSource.JSON:return new s.JsonGameConfigProvider("configs/game-config");case i.GameConfigSource.DEFAULT:default:return new c.DefaultGameConfigProvider}},e}();o.GameConfigLoader=a,cc._RF.pop()},{"./GameConfigSource":"GameConfigSource","./providers/DefaultGameConfigProvider":"DefaultGameConfigProvider","./providers/JsonGameConfigProvider":"JsonGameConfigProvider"}],GameConfigSource:[function(e,t,o){"use strict";cc._RF.push(t,"11ad46VR7dPWad1bmCWMooe","GameConfigSource"),Object.defineProperty(o,"__esModule",{value:!0}),o.GameConfigSource=void 0,function(e){e[e.DEFAULT=0]="DEFAULT",e[e.JSON=1]="JSON"}(o.GameConfigSource||(o.GameConfigSource={})),cc._RF.pop()},{}],GameConfigValidator:[function(e,t,o){"use strict";cc._RF.push(t,"041e3xL6eVI+o3GAT8qc0ku","GameConfigValidator"),Object.defineProperty(o,"__esModule",{value:!0}),o.GameConfigValidator=void 0;var n=e("../../core/utils/assert"),r=e("../../core/utils/ensure"),i=e("../domain/board/models/TileType"),c=function(){function e(){}return e.validate=function(e){var t=this;n.assertObject(e,this,"raw");var o=r.ensureNumber(e.boardWidth,this,"boardWidth"),c=r.ensureNumber(e.boardHeight,this,"boardHeight"),s=r.ensureNumber(e.clusterSize,this,"clusterSize"),a=r.ensureNumber(e.targetScore,this,"targetScore"),u=r.ensureNumber(e.maxMoves,this,"maxMoves"),p=r.ensureNumber(e.scoreMultiplier,this,"scoreMultiplier");return n.assertNonEmptyArray(e.allowedTypes,this,"allowedTypes"),{boardWidth:o,boardHeight:c,allowedTypes:e.allowedTypes.map(function(e,o){return n.assertEnumValue(i.TileType,e,t,"allowedTypes["+o+"]")}),clusterSize:s,targetScore:a,maxMoves:u,scoreMultiplier:p}},e}();o.GameConfigValidator=c,cc._RF.pop()},{"../../core/utils/assert":"assert","../../core/utils/ensure":"ensure","../domain/board/models/TileType":"TileType"}],GameConfig:[function(e,t,o){"use strict";cc._RF.push(t,"1b26eLVJPZKR4fSnAImer1v","GameConfig"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],GameContext:[function(e,t,o){"use strict";cc._RF.push(t,"fd8a6UXyqRGRZ3AL/0eryXk","GameContext"),Object.defineProperty(o,"__esModule",{value:!0}),o.GameContext=void 0;var n=e("../../../core/events/EventBus"),r=e("../../domain/board/models/BoardModel"),i=e("../../domain/board/services/DestructionService"),c=e("../../domain/board/services/FillService"),s=e("../../domain/board/services/GravityService"),a=e("../../domain/board/services/SearchService"),u=e("../../domain/state/models/GameStateModel"),p=e("../../domain/state/services/ScoreService"),l=e("../controllers/board/BoardController"),f=e("../controllers/state/GameStateController"),d=function(){function e(e){this.gameConfig=e,this.eventBus=new n.EventBus,this.gameStateModel=new u.GameStateModel(e.maxMoves,e.targetScore),this.scoreService=new p.ScoreService(e.scoreMultiplier),this.gameStateController=new f.GameStateController(this),this.boardModel=new r.BoardModel(e.boardWidth,e.boardHeight),this.fillService=new c.FillService(e.allowedTypes),this.searchService=new a.SearchService,this.destructionService=new i.DestructionService,this.gravityService=new s.GravityService,this.boardController=new l.BoardController(this)}return e.prototype.init=function(){this.gameStateController.init(),this.boardController.init()},e.prototype.dispose=function(){this.boardController.dispose(),this.gameStateController.dispose(),this.eventBus.clear()},e}();o.GameContext=d,cc._RF.pop()},{"../../../core/events/EventBus":"EventBus","../../domain/board/models/BoardModel":"BoardModel","../../domain/board/services/DestructionService":"DestructionService","../../domain/board/services/FillService":"FillService","../../domain/board/services/GravityService":"GravityService","../../domain/board/services/SearchService":"SearchService","../../domain/state/models/GameStateModel":"GameStateModel","../../domain/state/services/ScoreService":"ScoreService","../controllers/board/BoardController":"BoardController","../controllers/state/GameStateController":"GameStateController"}],GameEntry:[function(e,t,o){"use strict";cc._RF.push(t,"b0ca3TD77RJ4Zf8PJxueHcl","GameEntry");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c},i=this&&this.__awaiter||function(e,t,o,n){function r(e){return e instanceof o?e:new o(function(t){t(e)})}return new(o||(o=Promise))(function(o,i){function c(e){try{a(n.next(e))}catch(e){i(e)}}function s(e){try{a(n.throw(e))}catch(e){i(e)}}function a(e){e.done?o(e.value):r(e.value).then(c,s)}a((n=n.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return a([e,t])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(e){i=[6,e],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.GameEntry=void 0;var s=e("../../../core/utils/assert"),a=e("../../config/GameConfigLoader"),u=e("../../config/GameConfigSource"),p=e("../../presentation/animations/AnimationSystem"),l=e("../../presentation/board/view/BoardView"),f=e("../../presentation/state/view/MovesTextView"),d=e("../../presentation/state/view/ScoreTextView"),v=e("../context/GameContext"),h=cc._decorator,y=h.ccclass,_=h.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.configMode=u.GameConfigSource.DEFAULT,t.animationSystem=null,t.boardView=null,t.movesTextView=null,t.scoreTextView=null,t.context=null,t}return n(t,e),t.prototype.onLoad=function(){s.assertNotNull(this.animationSystem,this,"AnimationSystem"),s.assertNotNull(this.boardView,this,"BoardView"),s.assertNotNull(this.movesTextView,this,"MovesTextView"),s.assertNotNull(this.scoreTextView,this,"ScoreTextView")},t.prototype.start=function(){return i(this,void 0,Promise,function(){var e;return c(this,function(t){switch(t.label){case 0:return[4,(new a.GameConfigLoader).load(this.configMode)];case 1:return e=t.sent(),this.context=new v.GameContext(e),this.context.init(),this.boardView.init({eventBus:this.context.eventBus,boardModel:this.context.boardModel,animationSystem:this.animationSystem}),this.scoreTextView.init({eventBus:this.context.eventBus,initialValue:0,targetScore:this.context.gameStateModel.targetScore}),this.movesTextView.init({eventBus:this.context.eventBus,initialValue:this.context.gameStateModel.movesLeft}),[2]}})})},t.prototype.onDestroy=function(){null!==this.context&&(this.context.dispose(),this.context=null)},r([_({type:cc.Enum(u.GameConfigSource)})],t.prototype,"configMode",void 0),r([_(p.AnimationSystem)],t.prototype,"animationSystem",void 0),r([_(l.BoardView)],t.prototype,"boardView",void 0),r([_(f.MovesTextView)],t.prototype,"movesTextView",void 0),r([_(d.ScoreTextView)],t.prototype,"scoreTextView",void 0),t=r([y],t)}(cc.Component);o.GameEntry=m,cc._RF.pop()},{"../../../core/utils/assert":"assert","../../config/GameConfigLoader":"GameConfigLoader","../../config/GameConfigSource":"GameConfigSource","../../presentation/animations/AnimationSystem":"AnimationSystem","../../presentation/board/view/BoardView":"BoardView","../../presentation/state/view/MovesTextView":"MovesTextView","../../presentation/state/view/ScoreTextView":"ScoreTextView","../context/GameContext":"GameContext"}],GameStateController:[function(e,t,o){"use strict";cc._RF.push(t,"8abc8oftaBD6qCBxj9JRRs9","GameStateController");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0}),o.GameStateController=void 0;var r=e("../../../../core/events/SubscriptionGroup"),i=e("../../../domain/board/events/BoardProcessedEvent"),c=e("../../../domain/board/events/BoardProcessingEvent"),s=e("../../../domain/state/events/MovesUpdatedEvent"),a=e("../../../domain/state/events/ScoreUpdatedEvent"),u=e("../../../presentation/events/BoardSyncedEvent"),p=function(e){function t(t){var o=e.call(this)||this;return o._subscriptions=new r.SubscriptionGroup,o.onBoardProcessing=function(e){o.gameStateModel.setState("PROCESSING")},o.onBoardProcessed=function(e){e.destroyed.length<1?o.gameStateModel.setState("IDLE"):(o.gameStateModel.addScore(o.scoreService.calculate(e.destroyed.length)),o.gameStateModel.useMove(),o.eventBus.emit(new a.ScoreUpdatedEvent(o.gameStateModel.currentScore)),o.eventBus.emit(new s.MovesUpdatedEvent(o.gameStateModel.movesLeft)),o.gameStateModel.setState("ANIMATING"))},o.onBoardSynced=function(e){o.gameStateModel.setState("IDLE")},o.config=t.gameConfig,o.eventBus=t.eventBus,o.gameStateModel=t.gameStateModel,o.scoreService=t.scoreService,o}return n(t,e),t.prototype.onInit=function(){this._subscriptions.add(this.eventBus.on(i.BoardProcessedEvent,this.onBoardProcessed)),this._subscriptions.add(this.eventBus.on(u.BoardSyncedEvent,this.onBoardSynced)),this._subscriptions.add(this.eventBus.on(c.BoardProcessingEvent,this.onBoardProcessing))},t.prototype.dispose=function(){this._subscriptions.clear()},t}(e("../BaseController").BaseController);o.GameStateController=p,cc._RF.pop()},{"../../../../core/events/SubscriptionGroup":"SubscriptionGroup","../../../domain/board/events/BoardProcessedEvent":"BoardProcessedEvent","../../../domain/board/events/BoardProcessingEvent":"BoardProcessingEvent","../../../domain/state/events/MovesUpdatedEvent":"MovesUpdatedEvent","../../../domain/state/events/ScoreUpdatedEvent":"ScoreUpdatedEvent","../../../presentation/events/BoardSyncedEvent":"BoardSyncedEvent","../BaseController":"BaseController"}],GameStateModel:[function(e,t,o){"use strict";cc._RF.push(t,"99471UrmwxBoYieGRlv584Z","GameStateModel"),Object.defineProperty(o,"__esModule",{value:!0}),o.GameStateModel=void 0;var n=function(){function e(e,t){this._movesLeft=0,this._targetScore=0,this._currentScore=0,this._state="IDLE",this._movesLeft=e,this._targetScore=t,this._state="IDLE"}return Object.defineProperty(e.prototype,"movesLeft",{get:function(){return this._movesLeft},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"targetScore",{get:function(){return this._targetScore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentScore",{get:function(){return this._currentScore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),e.prototype.addScore=function(e){this._currentScore+=e},e.prototype.useMove=function(){this._movesLeft--},e.prototype.setState=function(e){this._state=e},e}();o.GameStateModel=n,cc._RF.pop()},{}],GravityAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"70c60r081hGYL7vF+dgxA9a","GravityAnimation");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.GravityAnimation=void 0;var i=e("./AnimationType"),c=cc._decorator,s=c.ccclass,a=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.squashDuration=.12,t.popDuration=.18,t.fadeDuration=.2,t.squashX=.92,t.squashY=1.05,t.popScale=1.15,t.finalScale=.6,t.finalOpacity=80,t.type=i.AnimationType.DESTRUCTION,t}return n(t,e),t.prototype.play=function(e){var t=this;return new Promise(function(o){if(cc.isValid(e)){var n=e.scale,r=e.opacity;cc.tween(e).to(t.squashDuration,{scaleX:n*t.squashX,scaleY:n*t.squashY},{easing:"sineOut"}).to(t.popDuration,{scale:n*t.popScale},{easing:"quadOut"}).parallel(cc.tween().to(t.fadeDuration,{opacity:t.finalOpacity},{easing:"sineIn"}),cc.tween().to(t.fadeDuration,{scale:n*t.finalScale},{easing:"quadIn"})).call(function(){e.scale=n,e.opacity=r,o()}).start()}else o()})},r([a],t.prototype,"squashDuration",void 0),r([a],t.prototype,"popDuration",void 0),r([a],t.prototype,"fadeDuration",void 0),r([a],t.prototype,"squashX",void 0),r([a],t.prototype,"squashY",void 0),r([a],t.prototype,"popScale",void 0),r([a],t.prototype,"finalScale",void 0),r([a],t.prototype,"finalOpacity",void 0),t=r([s],t)}(cc.Component);o.GravityAnimation=u,cc._RF.pop()},{"./AnimationType":"AnimationType"}],GravityService:[function(e,t,o){"use strict";cc._RF.push(t,"c5c2aVzj19IM56enTWeh7/8","GravityService"),Object.defineProperty(o,"__esModule",{value:!0}),o.GravityService=void 0;var n=e("../models/TileType"),r=function(){function e(){}return e.prototype.apply=function(e,t){for(var o=0,r=t;o<r.length;o++){var i=r[o],c=e.get(i.from);e.set(i.from,n.TileType.NONE),e.set(i.to,c)}},e}();o.GravityService=r,cc._RF.pop()},{"../models/TileType":"TileType"}],IAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"a7ed3ubAfNLQYwbiBaXzuEf","IAnimation"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],IDisposable:[function(e,t,o){"use strict";cc._RF.push(t,"0d1f2BKAyRKradOcgIbpJtI","IDisposable"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],IEvent:[function(e,t,o){"use strict";cc._RF.push(t,"8fa1c68GtVNRKFHm/nx3oTX","IEvent"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],IGameConfigProvider:[function(e,t,o){"use strict";cc._RF.push(t,"58c4c78lEFJBK0t7vKUhhpW","IGameConfigProvider"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],IInitializable:[function(e,t,o){"use strict";cc._RF.push(t,"ee3c8BQs6BEYJwkQjEK6TMK","IInitializable"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],IValidatable:[function(e,t,o){"use strict";cc._RF.push(t,"16605S+cj5B/rtndFr9BxXG","IValidatable"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],JsonGameConfigProvider:[function(e,t,o){"use strict";cc._RF.push(t,"c6756TaWZJEIKaFoamyU+a9","JsonGameConfigProvider");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__awaiter||function(e,t,o,n){function r(e){return e instanceof o?e:new o(function(t){t(e)})}return new(o||(o=Promise))(function(o,i){function c(e){try{a(n.next(e))}catch(e){i(e)}}function s(e){try{a(n.throw(e))}catch(e){i(e)}}function a(e){e.done?o(e.value):r(e.value).then(c,s)}a((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return a([e,t])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(e){i=[6,e],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.JsonGameConfigProvider=void 0;var c=e("./BaseGameConfigProvider"),s=e("../GameConfigValidator"),a=function(e){function t(t){var o=e.call(this)||this;return o._path=t,o}return n(t,e),t.prototype.load=function(){return r(this,void 0,Promise,function(){var e;return i(this,function(t){switch(t.label){case 0:return[4,this.loadJsonAsset(this._path)];case 1:return e=t.sent(),this.config=s.GameConfigValidator.validate(e.json),[2]}})})},t.prototype.loadJsonAsset=function(e){return new Promise(function(t,o){cc.resources.load(e,cc.JsonAsset,function(n,r){n||!r?o(new Error("[JsonGameConfigProvider] Failed to load: "+e+"\n"+n)):t(r)})})},t}(c.BaseGameConfigProvider);o.JsonGameConfigProvider=a,cc._RF.pop()},{"../GameConfigValidator":"GameConfigValidator","./BaseGameConfigProvider":"BaseGameConfigProvider"}],Matrix:[function(e,t,o){"use strict";cc._RF.push(t,"320baWGsBZEno88utR9Y4nE","Matrix"),Object.defineProperty(o,"__esModule",{value:!0}),o.Matrix=void 0;var n=function(){function e(e,t,o){this._width=e,this._height=t,this._data=new Array(t);for(var n=0;n<t;n++){for(var r=new Array(e),i=0;i<e;i++)r[i]=o(i,n);this._data[n]=r}}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),e.prototype.get=function(e,t){return this._data[t][e]},e.prototype.set=function(e,t,o){this._data[t][e]=o},e.prototype.swap=function(e,t,o,n){var r=this._data[t][e];this._data[t][e]=this._data[n][o],this._data[n][o]=r},e.prototype.forEach=function(e){for(var t=0;t<this._height;t++)for(var o=0;o<this._width;o++)e(this._data[t][o],o,t)},e}();o.Matrix=n,cc._RF.pop()},{}],MovesTextViewContext:[function(e,t,o){"use strict";cc._RF.push(t,"edbdcH0xDlCDLhdQ15+puc6","MovesTextViewContext"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],MovesTextView:[function(e,t,o){"use strict";cc._RF.push(t,"d8aafGKJJ1BEZQfGSesrZxi","MovesTextView");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.MovesTextView=void 0;var i=e("../../../domain/state/events/MovesUpdatedEvent"),c=e("../../core/view/DynamicTextView"),s=cc._decorator.ccclass,a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.eventType=function(){return i.MovesUpdatedEvent},t.prototype.format=function(e){return e.toString()},t=r([s],t)}(c.DynamicTextView);o.MovesTextView=a,cc._RF.pop()},{"../../../domain/state/events/MovesUpdatedEvent":"MovesUpdatedEvent","../../core/view/DynamicTextView":"DynamicTextView"}],MovesUpdatedEvent:[function(e,t,o){"use strict";cc._RF.push(t,"78ef3eplVBFApDB+RThG7MX","MovesUpdatedEvent");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0}),o.MovesUpdatedEvent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(e("../../../../core/events/ValueChangedEvent").ValueChangedEvent);o.MovesUpdatedEvent=r,cc._RF.pop()},{"../../../../core/events/ValueChangedEvent":"ValueChangedEvent"}],ScoreService:[function(e,t,o){"use strict";cc._RF.push(t,"ed1f8pLuO9IALBgNsqVtvjL","ScoreService"),Object.defineProperty(o,"__esModule",{value:!0}),o.ScoreService=void 0;var n=function(){function e(e){this._scoreMultiplier=e}return e.prototype.calculate=function(e){return e*e*this._scoreMultiplier},e}();o.ScoreService=n,cc._RF.pop()},{}],ScoreTextViewContext:[function(e,t,o){"use strict";cc._RF.push(t,"7af9aTEbmRII6sX9caFBjRn","ScoreTextViewContext"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],ScoreTextView:[function(e,t,o){"use strict";cc._RF.push(t,"7bd0f5hs8VARYsgFprc1Aea","ScoreTextView");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.ScoreTextView=void 0;var i=e("../../../domain/state/events/ScoreUpdatedEvent"),c=e("../../core/view/DynamicTextView"),s=cc._decorator.ccclass,a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.eventType=function(){return i.ScoreUpdatedEvent},t.prototype.format=function(e){return e+"/"+this.context.targetScore},t=r([s],t)}(c.DynamicTextView);o.ScoreTextView=a,cc._RF.pop()},{"../../../domain/state/events/ScoreUpdatedEvent":"ScoreUpdatedEvent","../../core/view/DynamicTextView":"DynamicTextView"}],ScoreUpdatedEvent:[function(e,t,o){"use strict";cc._RF.push(t,"5fc46IhQk9N7YaoODiMNKUJ","ScoreUpdatedEvent");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0}),o.ScoreUpdatedEvent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(e("../../../../core/events/ValueChangedEvent").ValueChangedEvent);o.ScoreUpdatedEvent=r,cc._RF.pop()},{"../../../../core/events/ValueChangedEvent":"ValueChangedEvent"}],SearchService:[function(e,t,o){"use strict";cc._RF.push(t,"146bchEKatLLLIq9vBSpvaC","SearchService"),Object.defineProperty(o,"__esModule",{value:!0}),o.SearchService=void 0;var n=e("../../../../core/collections/Matrix"),r=e("../models/TileType"),i=function(){function e(){}return e.prototype.findCluster=function(e,t){for(var o=e.get(t),i=[],c=new n.Matrix(e.width,e.height,function(){return!1}),s=[t];s.length>0&&o!==r.TileType.NONE;){var a=s.pop();a&&(c.get(a.x,a.y)||(c.set(a.x,a.y,!0),e.get(a)===o&&(i.push(a),s.push.apply(s,this.findNeighbors(e,a)))))}return i},e.prototype.findNeighbors=function(e,t){for(var o=[],n=0,r=[{x:t.x+1,y:t.y},{x:t.x-1,y:t.y},{x:t.x,y:t.y+1},{x:t.x,y:t.y-1}];n<r.length;n++){var i=r[n];i.x<0||i.y<0||i.x>=e.width||i.y>=e.height||o.push(i)}return o},e.prototype.findDrops=function(e){for(var t=[],o=e.width-1;o>=0;o--)for(var n=0,r=e.height-1;r>=0;r--)e.isEmpty({x:o,y:r})?n++:n>0&&t.push({from:{x:o,y:r},to:{x:o,y:r+n}});return t},e}();o.SearchService=i,cc._RF.pop()},{"../../../../core/collections/Matrix":"Matrix","../models/TileType":"TileType"}],SubscriptionGroup:[function(e,t,o){"use strict";cc._RF.push(t,"18bfaE9+69Bu4GzKQB8eC60","SubscriptionGroup"),Object.defineProperty(o,"__esModule",{value:!0}),o.SubscriptionGroup=void 0;var n=function(){function e(){this.subs=[]}return e.prototype.add=function(e){this.subs.push(e)},e.prototype.clear=function(){for(var e=0,t=this.subs;e<t.length;e++){t[e].unsubscribe()}this.subs.length=0},e}();o.SubscriptionGroup=n,cc._RF.pop()},{}],Subscription:[function(e,t,o){"use strict";cc._RF.push(t,"e054aPiy9xJ/roTuUKhU0v3","Subscription"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],TileAssets:[function(e,t,o){"use strict";cc._RF.push(t,"4db3f6Nos5B9K7+VqraVTc/","TileAssets");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.TileAssets=void 0;var i=e("../../../core/utils/assert"),c=e("../../../core/utils/ensure"),s=e("../../domain/board/models/TileType"),a=cc._decorator,u=a.ccclass,p=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.red=null,t.green=null,t.blue=null,t.purple=null,t.yellow=null,t}return n(t,e),t.prototype.onLoad=function(){this.validate()},t.prototype.validate=function(){this._map=new Map([[s.TileType.RED,c.ensureNotNull(this.red,this,"RED")],[s.TileType.GREEN,c.ensureNotNull(this.green,this,"GREEN")],[s.TileType.BLUE,c.ensureNotNull(this.blue,this,"BLUE")],[s.TileType.PURPLE,c.ensureNotNull(this.purple,this,"PURPLE")],[s.TileType.YELLOW,c.ensureNotNull(this.yellow,this,"YELLOW")]])},t.prototype.get=function(e){var t=this._map.get(e);return i.assertNotNull(t,this,"Sprite for type "+s.TileType[e]),t},r([p(cc.SpriteFrame)],t.prototype,"red",void 0),r([p(cc.SpriteFrame)],t.prototype,"green",void 0),r([p(cc.SpriteFrame)],t.prototype,"blue",void 0),r([p(cc.SpriteFrame)],t.prototype,"purple",void 0),r([p(cc.SpriteFrame)],t.prototype,"yellow",void 0),t=r([u],t)}(cc.Component);o.TileAssets=l,cc._RF.pop()},{"../../../core/utils/assert":"assert","../../../core/utils/ensure":"ensure","../../domain/board/models/TileType":"TileType"}],TileClickedEvent:[function(e,t,o){"use strict";cc._RF.push(t,"be1e3ah8fJEB4PBG2B6hWya","TileClickedEvent"),Object.defineProperty(o,"__esModule",{value:!0}),o.TileClickedEvent=void 0;var n=function(){return function(e){this.position=e}}();o.TileClickedEvent=n,cc._RF.pop()},{}],TileDrop:[function(e,t,o){"use strict";cc._RF.push(t,"e4bc7Mz5W1IHIw9HwLJL9Ik","TileDrop"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],TilePosition:[function(e,t,o){"use strict";cc._RF.push(t,"e31ab1Szq1KkpQ2i09M9pA2","TilePosition"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],TileType:[function(e,t,o){"use strict";cc._RF.push(t,"ff92aR8Ym9CB7br3M3C8KnH","TileType"),Object.defineProperty(o,"__esModule",{value:!0}),o.TileType=void 0,function(e){e[e.NONE=0]="NONE",e[e.RED=1]="RED",e[e.GREEN=2]="GREEN",e[e.BLUE=3]="BLUE",e[e.PURPLE=4]="PURPLE",e[e.YELLOW=5]="YELLOW",e[e.BOMB=6]="BOMB",e[e.SUPER_BOMB=7]="SUPER_BOMB",e[e.HORIZONTAL_ROCKET=8]="HORIZONTAL_ROCKET",e[e.VERTICAL_ROCKET=9]="VERTICAL_ROCKET"}(o.TileType||(o.TileType={})),cc._RF.pop()},{}],TileViewContext:[function(e,t,o){"use strict";cc._RF.push(t,"c7e41M2uOVIuYIyMt4LhB8p","TileViewContext"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],TileView:[function(e,t,o){"use strict";cc._RF.push(t,"0eda0LA+Q5BwrB21iLZDWRq","TileView");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.TileView=void 0;var i=e("../../../../core/utils/assert"),c=e("../../events/TileClickedEvent"),s=e("../../core/view/EventView"),a=cc._decorator,u=a.ccclass,p=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sprite=null,t.target=null,t}return n(t,e),t.prototype.validate=function(){i.assertNotNull(this.sprite,this,"Sprite")},t.prototype.onInit=function(){this.position=this.context.position},t.prototype.subscribe=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onClick,this)},t.prototype.unsubscribe=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onClick,this)},t.prototype.onClick=function(){this.emit(new c.TileClickedEvent(this.position))},t.prototype.show=function(){this.node.active=!0},t.prototype.hide=function(){this.node.active=!1},t.prototype.set=function(e){this.sprite.spriteFrame=e},t.prototype.getTarget=function(){var e;return null!==(e=this.target)&&void 0!==e?e:this.node},r([p(cc.Sprite)],t.prototype,"sprite",void 0),r([p(cc.Node)],t.prototype,"target",void 0),t=r([u],t)}(s.EventView);o.TileView=l,cc._RF.pop()},{"../../../../core/utils/assert":"assert","../../core/view/EventView":"EventView","../../events/TileClickedEvent":"TileClickedEvent"}],ValueChangedEvent:[function(e,t,o){"use strict";cc._RF.push(t,"323e3lkPd9Nzq1jCSpLjod2","ValueChangedEvent"),Object.defineProperty(o,"__esModule",{value:!0}),o.ValueChangedEvent=void 0;var n=function(){return function(e){this.value=e}}();o.ValueChangedEvent=n,cc._RF.pop()},{}],assert:[function(e,t,o){"use strict";function n(e,t,o){var n;if(n="function"==typeof t?t.name:t.constructor.name,!e)throw new Error("["+n+"] "+o)}function r(e,t,o){n(null!==e&&void 0!==e,t,o+" must not be null nor undefined")}function i(e,t,o){n(Array.isArray(e),t,o+" must be an array")}function c(e,t,o){n(e.length>0,t,o+" must not be empty")}cc._RF.push(t,"3cb7d9OgnZEJaI/WU7/lNKX","assert"),Object.defineProperty(o,"__esModule",{value:!0}),o.assertNumber=o.assertObject=o.assertEnumValue=o.assertString=o.assertNonEmptyArray=o.assertArrayNotEmpty=o.assertArray=o.assertNotNull=o.assert=void 0,o.assert=n,o.assertNotNull=r,o.assertArray=i,o.assertArrayNotEmpty=c,o.assertNonEmptyArray=function(e,t,o){i(e,t,o),c(e,t,o)},o.assertString=function(e,t,o){n("string"==typeof e,t,o+" must be string")},o.assertEnumValue=function(e,t,o,r){var i=e[t];return n(void 0!==i,o,"Unknown "+r+': "'+t+'"'),i},o.assertObject=function(e,t,o){n("object"==typeof e,t,o+" must be object"),r(e,t,o)},o.assertNumber=function(e,t,o){n("number"==typeof e&&!Number.isNaN(e),t,o+" must be number")},cc._RF.pop()},{}],ensure:[function(e,t,o){"use strict";cc._RF.push(t,"4a80emCBIlPbY4kzmojZq/X","ensure"),Object.defineProperty(o,"__esModule",{value:!0}),o.ensureNotNull=o.ensureNumber=void 0;var n=e("./assert");o.ensureNumber=function(e,t,o){return n.assertNumber(e,t,o),e},o.ensureNotNull=function(e,t,o){return n.assertNotNull(e,t,o),e},cc._RF.pop()},{"./assert":"assert"}],random:[function(e,t,o){"use strict";cc._RF.push(t,"a5d9cezF4BFNIl1SShDyYsy","random"),Object.defineProperty(o,"__esModule",{value:!0}),o.Random=void 0;var n=function(){function e(){}return e.intRange=function(e,t){return e+Math.floor(Math.random()*(t-e))},e.floatRange=function(e,t){return e+Math.random()*(t-e)},e.pick=function(e){if(0===e.length)throw new Error("[Random] Cannot pick from empty array");return e[this.intRange(0,e.length)]},e}();o.Random=n,cc._RF.pop()},{}]},{},["Matrix","EventBus","IEvent","Subscription","SubscriptionGroup","ValueChangedEvent","IDisposable","IInitializable","IValidatable","assert","ensure","random","GameContext","BaseController","BoardController","GameStateController","GameEntry","GameConfig","GameConfigLoader","GameConfigSource","GameConfigValidator","BaseGameConfigProvider","DefaultGameConfigProvider","IGameConfigProvider","JsonGameConfigProvider","BoardProcessedEvent","BoardProcessingEvent","BoardModel","TileDrop","TilePosition","TileType","DestructionService","FillService","GravityService","SearchService","MovesUpdatedEvent","ScoreUpdatedEvent","GameStateModel","ScoreService","AnimationSystem","AnimationType","BaseAnimation","DestructionAnimation","GravityAnimation","IAnimation","TileAssets","BoardViewContext","TileViewContext","BoardView","TileView","DynamicTextViewContext","EventViewContext","ContextView","DynamicTextView","EventView","BoardSyncedEvent","TileClickedEvent","MovesTextViewContext","ScoreTextViewContext","MovesTextView","ScoreTextView"]);